<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>跑马灯</title>
		<script src="js/vue.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="app">
			<input type="button" id="" value="浪起来!" @click="start" />
			<button type="button" @click="stop">猥琐</button>
			<h3>{{ msg }}</h3>
		</div>
		
		<script type="text/javascript">
			var vm = new Vue({
				el: '#app',
				data: {
					msg : '猥琐发育,别浪~~~',
					timeId : null,
				},
				methods:{
					/* start : function(){
						var _this = this;
						setInterval(function(){
							//console.log(this.msg);
							var str = _this.msg.substring(0,1);
							var end = _this.msg.substring(1);
							_this.msg = end + str;
						},200);
					}, */
					//使用es6语法中的箭头函数,可以解决this指向问题.另方法可以用es6语法简写
					start() {
						
						//有一个问题,每点击一次会增加一个定时器,点击多次后只能停止最近的一个定时器,停不下来了
						if(this.timeId != null) return;
						this.timeId = setInterval(() => {
							var str = this.msg.substring(0,1);
							var end = this.msg.substring(1);
							this.msg = end + str;
						},200);
					},
					//方法可以简写
					stop(){
						clearInterval(this.timeId);
						this.timeId = null;
					}
				}
				
				
			});
		</script>
	</body>
</html>
